{% extends "base.html" %}
{% block content %}
<div class="page-header">
  <h2>üîê Reset Password</h2>
  <div class="breadcrumb">
    <a href="/login">Login</a> > <span>Reset Password</span>
  </div>
</div>

<div class="auth-form">
  <h3>Create New Password</h3>
  <p>Enter your new password below. It must be at least 8 characters long with uppercase, lowercase, number, and special character.</p>
  
  {% if error %}
    <div class="error">{{ error }}</div>
  {% endif %}

  <form method="post" action="/reset-password/{{ token }}">
    <div class="form-group">
      <label for="password">New Password</label>
      <input type="password" id="password" name="password" placeholder="Enter new password" required 
             pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*]).{8,}"
             title="Password must be 8+ chars with uppercase, lowercase, number, and special character" />
    </div>
    
    <div class="form-group">
      <label for="confirm_password">Confirm New Password</label>
      <input type="password" id="confirm_password" name="confirm_password" placeholder="Confirm new password" required />
    </div>
    
    <div class="form-actions">
      <button type="submit" class="btn btn-success btn-lg">‚úÖ Reset Password</button>
      <a href="/login" class="btn btn-secondary btn-lg">‚Üê Back to Login</a>
    </div>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirm_password');
    
    function checkMatch() {
        if (confirmPassword.value && password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity('Passwords do not match');
            confirmPassword.style.borderColor = '#dc3545';
        } else {
            confirmPassword.setCustomValidity('');
            confirmPassword.style.borderColor = '#28a745';
        }
    }
    
    password.addEventListener('input', checkMatch);
    confirmPassword.addEventListener('input', checkMatch);
});
</script>
{% endblock %}